#include "jjy.h"

/**
  JJY signal "protocol" data

  each value represents seconds

  - 0xff: marker, 0.2s pulse
  - 0xf0: constantly '0'
  - else:
    upper 4 bits: byte position of data
    lower 4 bits: bit position of data (i.e. bit mask)

  yyMMdddwhhmmlpr
  0123456789abcde
  */
const uint8_t JJY_TABLE[] = {
  0xff, // M
  0xa4, 0xa2, 0xa1, // minute 10
  0xf0, 0xb8, 0xb4, 0xb2, 0xb1, // minute 1
  0xff, // P1
  0xf0, 0xf0, 0x82, 0x81, // hour 10
  0xf0, 0x98, 0x94, 0x92, 0x91, // hour 1
  0xff, // P2
  0xf0, 0xf0, 0x42, 0x41, // day 100
  0xf0, 0x58, 0x54, 0x52, 0x51, // day 10
  0xff, // P3
  0x68, 0x64, 0x62, 0x61, // day 1
  0xf0, 0xf0,
  0xd2, 0xd1, // parity
  0xe2, // reserved1
  0xff, // P4
  0xe1, // reserved2
  0x08, 0x04, 0x02, 0x01, // year 10
  0x18, 0x14, 0x12, 0x11, // year 1
  0xff, // P5
  0x74, 0x72, 0x71, // weekday
  0xc2, 0xc1, // leap second
  0xf0, 0xf0, 0xf0, 0xf0,
  0xff, // P0
};
